@tailwind base;
@tailwind components;
@tailwind utilities;

/* 全域樣式 */
@layer base {
  html, body {
    @apply h-full;
  }

  /* 展示頁面使用 overflow-hidden，管理頁面允許滾動 */
  body.display-mode {
    @apply overflow-hidden;
  }

  #root {
    @apply h-full;
  }

  * {
    @apply box-border;
  }

  /* 觸控優化 */
  button, [role="button"] {
    -webkit-tap-highlight-color: transparent;
  }

  /* 隱藏滾動條 */
  .hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }

  /* 媒體查詢 - 觸控設備優化 */
  @media (pointer: coarse) {
    button, [role="button"] {
      @apply min-h-12 min-w-12;
    }
  }
}

/* 自定義組件樣式 */
@layer components {
  /* 浮動控制按鈕 */
  .floating-control {
    @apply fixed z-50 bg-black/70 backdrop-blur-sm text-white rounded-full p-3;
    @apply transition-all duration-300 ease-in-out;
    @apply hover:bg-black/90 active:scale-95;
  }

  /* 媒體容器 */
  .media-container {
    @apply relative w-full h-full flex items-center justify-center;
    @apply bg-black overflow-hidden;
  }

  /* 媒體元素 */
  .media-element {
    @apply max-w-full max-h-full object-contain;
    transition: transform 0.3s ease;
  }

  /* 智能影片旋轉修正（僅限電腦瀏覽器） */
  @media not (pointer: coarse) {
    .media-element.auto-rotate-90 {
      transform: rotate(90deg);
    }

    .media-element.auto-rotate-180 {
      transform: rotate(180deg);
    }

    .media-element.auto-rotate-270 {
      transform: rotate(270deg);
    }
  }

  /* 管理卡片 */
  .admin-card {
    @apply bg-white rounded-lg shadow-lg p-4 mb-4;
    @apply border border-gray-200;
  }

  /* 觸控友善的輸入欄位 */
  .touch-input {
    @apply w-full px-4 py-3 text-lg border border-gray-300 rounded-lg;
    @apply focus:ring-2 focus:ring-blue-500 focus:border-transparent;
    @apply min-h-touch-target;
  }

  /* 觸控友善的按鈕 */
  .touch-button {
    @apply px-6 py-3 text-lg font-medium rounded-lg;
    @apply min-h-touch-target min-w-touch-target;
    @apply transition-all duration-200;
    @apply active:scale-95;
  }

  .touch-button-primary {
    @apply touch-button bg-blue-500 text-white;
    @apply hover:bg-blue-600 active:bg-blue-700;
  }

  .touch-button-secondary {
    @apply touch-button bg-gray-500 text-white;
    @apply hover:bg-gray-600 active:bg-gray-700;
  }

  .touch-button-danger {
    @apply touch-button bg-red-500 text-white;
    @apply hover:bg-red-600 active:bg-red-700;
  }

  /* 上傳區域 */
  .upload-zone {
    @apply border-2 border-dashed border-gray-300 rounded-lg p-8;
    @apply text-center transition-colors duration-200;
    @apply hover:border-blue-400 hover:bg-blue-50;
  }

  .upload-zone.drag-active {
    @apply border-blue-500 bg-blue-100;
  }

  /* 媒體網格 */
  .media-grid {
    @apply grid grid-cols-2 tablet:grid-cols-3 desktop:grid-cols-4;
    @apply gap-4 p-4;
  }

  .media-item {
    @apply relative aspect-square rounded-lg overflow-hidden;
    @apply bg-gray-200 cursor-pointer;
    @apply transition-all duration-200;
    @apply hover:scale-105 active:scale-95;
  }

  /* 載入動畫 */
  .loading-spinner {
    @apply animate-spin rounded-full border-2 border-gray-300 border-t-blue-500;
  }

  /* 淡入動畫 */
  .fade-in {
    animation: fadeIn 0.3s ease-in-out;
  }

  /* 滑入動畫 */
  .slide-up {
    animation: slideUp 0.3s ease-out;
  }
}

/* 動畫定義 */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* 工具類 */
@layer utilities {
  .text-shadow {
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
  }

  .backdrop-blur-strong {
    backdrop-filter: blur(10px);
  }

  /* 安全區域支援 */
  .safe-area-inset {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
  }
}